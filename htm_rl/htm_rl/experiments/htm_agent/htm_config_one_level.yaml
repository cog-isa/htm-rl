seed: &seed 123
cells_per_column: &cells_per_column 1
muscles_size: 4

spatial_pooler_default:
  globalInhibition: True
  localAreaDensity: 0.04
  potentialPct: 0.5
  stimulusThreshold: 1
  synPermInactiveDec: 0.01
  synPermActiveInc: 0.1
  synPermConnected: 0.1
  minPctOverlapDutyCycle: 0.001
  dutyCyclePeriod: 1000
  boostStrength: 0.0
  seed: *seed
  spVerbosity: 0
  wrapAround: True
  columnDimensions: [ 1000 ]
  numActiveColumnsPerInhArea: 0

temporal_memory_default:
  noise_tolerance: 0.0
  initial_permanence: 0.4
  connected_threshold: 0.5
  permanence_increment: 0.1
  permanence_decrement: 0.02
  predicted_segment_decrement: 0.001
  basal_cells_per_column: *cells_per_column
  apical_cells_per_column: *cells_per_column
  seed: *seed

basal_ganglia_default:
  alpha: 0.1
  beta: 0.1
  gamma: 0.01
  discount_factor: 0.95
  w_STN: 0.001
  value_window: 100
  greedy: False
  eps: 0.02
  learn_sp: True
  seed: *seed

spatial_memory_default:
  overlap_threshold: 0.9
  initial_permanence: 0.55
  permanence_increment: 0.1
  permanence_decrement: 0.05
  permanence_threshold: 0.5
  permanence_forgetting_decrement: 0.01
  activation_threshold: 1

block_default:
  gamma: 0.95
  predicted_boost: 0.0

input_block_default:
  level: 0
  columns: 0

environment:
  shape_xy: [ 4, 4 ]
  seed: 88

  actions:
    - move right
    - move down
    - move left
    - move up

  terminate:
    episode_max_steps: 100
    early_stop: true

  areas:
    n_types: 2

  obstacles:
    density: .25

  food:
    n_items: 1
    reward: 20.

  action_costs:
    action_cost: -0.01
    action_weight:
      stay: 2.
      turn: 0.0
      move: 1.0

  rendering:
    view_rectangle: [ [ -4, -4 ], [ 4, 4 ] ]
    render:
#      - obstacles
#      - areas
#      - food
      - position
    #      - direction
    bucket_size: 2

blocks:
  0:
    block: {level: 1} # state block
    tm:
      basal_columns: 200
    sp:
      localAreaDensity: 0.04
    bg: null
    bg_sp: null
    sm: {}
  1:
    block: {level: 1} # action block
    tm:
      basal_columns: 200
    sp:
      localAreaDensity: 0.04
    bg:
      greedy: False
      eps: 0.02
      learn_sp: True
    bg_sp:
      columnDimensions: [ 400 ]
      localAreaDensity: 0.04
    sm: {}

hierarchy:
  input_blocks: [ 0, 1 ]
  output_block: 3
  block_connections: [
    {
      'basal_in': [ ],
      'apical_in': [ ],
      'feedback_in': [ ],
      'basal_out': [ 2 ],
      'apical_out': [ ],
      'feedback_out': [ ]
    },

    {
      'basal_in': [ ],
      'apical_in': [ ],
      'feedback_in': [ ],
      'basal_out': [ 3 ],
      'apical_out': [ ],
      'feedback_out': [ ]
    },

    {
      'basal_in': [ 0 ],
      'apical_in': [ 3 ],
      'feedback_in': [ ],
      'basal_out': [ ],
      'apical_out': [ 3 ],
      'feedback_out': [ ]
    },

    {
      'basal_in': [ 1 ],
      'apical_in': [ 2 ],
      'feedback_in': [ ],
      'basal_out': [ ],
      'apical_out': [ 2 ],
      'feedback_out': [ ]
    }

  ]

agent:
  punish_reward: -0.01
  alpha: 1.0
  action:
    noise_tolerance: 0.0
    patterns:
      [
        [ 1, 0, 0, 0, 0, 1, 1, 1 ],
        [ 0, 1, 0, 0, 1, 0, 1, 1 ],
        [ 0, 0, 1, 0, 1, 1, 0, 1 ],
        [ 0, 0, 0, 1, 1, 1, 1, 0 ]
      ]
    do_nothing_action: random
  muscles:
    noise_tolerance: 0.0
    permanence_increment: 0.1
    permanence_decrement: 0.02
    depolarized_decrement: 0.01
    connected_permanence: 0.5
    initial_permanence: 0.6
    sample_size: 1.0
    max_segments_per_cell: 255
    seed: *seed